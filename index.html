<body>
    <script>

        const version = 'v0.1c'

        let audioReady = false
        const audio = new Audio()
        audio.src = 'yooooo.mp3'
        const markReady = () => {
            audioReady = true
            button.style.backgroundColor = '#00FF00'
        }
        audio.addEventListener( 'loadedmetadata', markReady)
        audio.addEventListener( 'canplay', markReady)

        const div = document.createElement('div')
        div.style.width = '100%',
        div.style.height = '100%',
        div.style.display = 'flex'
        div.style.justifyContent = 'space-around'
        document.body.appendChild( div )

        const button = document.createElement('button')
        button.style.height = 'fit-content'
        button.style.marginTop = button.style.marginBottom = 'auto'
        button.style.fontSize = '10vh'
        button.style.borderRadius = '5vh'
        button.style.paddingLeft = button.style.paddingRight = '5vh'
        button.innerHTML = 'yes or no?'
        div.appendChild( button )

        const pepe = document.createElement('img')
        pepe.src = 'pepe.png'
        pepe.style.transform = 'rotateY(180deg)'
        pepe.style.position = 'fixed'
        pepe.style.right = 0
        pepe.style.bottom = '-100vh'
        pepe.style.height = '60vh'
        // pepe.style.opacity = '0.3'
        pepe.style.transition = 'bottom 5s'
        div.appendChild( pepe )

        const dude = document.createElement('img')
        dude.src = 'dude.png'
        dude.style.position = 'fixed'
        dude.style.left = 0
        dude.style.left = '-100vw'
        dude.style.top = 0
        dude.style.height = '100vh'
        dude.style.opacity = '0.3'
        dude.style.transition = 'left 3s'
        div.appendChild( dude )


setTimeout(() => {
    
}, 100)
        button.addEventListener('click', e => {
            if ( !audioReady ) {
                return
            }

            div.removeChild( button )
            audio.play()

            const state = {
                smiley: false,
                dude: false,
                pepe: false
            }
            const check = () => {
                const pos = audio.currentTime
                if ( pos >= 7.5 && !state.smiley ) {
                    state.smiley = true

                    const result = Math.random() >= 0.50 ? true : false
                    const text = result ? 'yes ðŸ˜ƒ' : 'NO ðŸ˜ '
                    const element = document.createElement('span')
                    element.style.zIndex = 0
                    element.style.marginTop = element.style.marginBottom = 'auto'
                    element.style.transition = 'font-size 2s'
                    element.style.fontSize = '0'
                    setTimeout(() => {
                        element.style.fontSize = '20vh'
                    }, 100)
                    element.innerHTML = text
                    div.appendChild( element )
                }
                if ( pos >= 7.1 && !state.dude ) {
                    state.dude = true
                    dude.style.left = '-5px'
                }
                const pepeEnd = 7.2
                if ( pos >= 1.0 && pos < pepeEnd && !state.pepe ) {
                    state.pepe = true
                    pepe.style.bottom = '-5px'
                }
                if ( pos >= pepeEnd && state.pepe ) {
                    state.pepe = false
                    pepe.style.transition = 'bottom 1s'
                    pepe.style.bottom = '-100vh'
                }
                requestAnimationFrame( check )
            }
            check()
        })

        const verLabel = document.createElement('span')
        verLabel.style.position = 'fixed'
        verLabel.style.left = '0'
        verLabel.style.bottom = '0'
        verLabel.innerHTML = version
        div.appendChild( verLabel )

    </script>

    <!-- <iframe id="existing-iframe-example"
        width="640" height="360"
        src="https://www.youtube.com/embed/NuU951h--cU?autoplay=1&enablejsapi=1"
        frameborder="0"
        allow="autoplay"
        style="border: solid 4px #37474F"
    ></iframe>

    <script type="text/javascript">
        var tag = document.createElement('script');
        tag.id = 'iframe-demo';
        tag.src = 'https://www.youtube.com/iframe_api';
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('existing-iframe-example', {
                events: {
                    'onReady': onPlayerReady,
                },
                playerVars: {
                    "autoplay": 1
                }
            });
        }
        function onPlayerReady(event) {
            // console.log('boom')
            // event.target.setVolume(100);
            // event.target.playVideo();
            
        }
    </script> -->
</body>