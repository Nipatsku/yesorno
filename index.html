<head>
    <style>
        .container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: space-around;
        }
        .start-button {
            height: fit-content;
            margin-top: auto;
            margin-bottom: auto;
            font-size: 10vh;
            border-radius: 5vh;
            padding-left: 5vh;
            padding-right: 5vh;
        }
        .pepe {
            transform: rotateY(180deg);
            position: fixed;
            right: 0;
            bottom: -100vh;
            transition: bottom 5s;
        }
        .dude {
            position: fixed;
            height: 100vh;
            top: 0;
            opacity: 0.3;
        }
        .result {
            z-index: 0;
            margin-top: auto;
            margin-bottom: auto;
            transition: font-size 2s;
            font-size: 0;
        }
    
        @media only screen and ( orientation: landscape ) {
            .dude {
                left: -100vw;
                transition: left 1.5s;
            }
            .dude-visible {
                left: -5px;
            }
            .pepe {
                height: 60vh;
            }
            .result-visible {
                font-size: 20vh;
            }
        }

        @media only screen and ( orientation: portrait ) {
            .dude {
                right: 100vw;
                transition: right 3s;
            }
            .dude-visible {
                right: 0;
            }
            .pepe {
                width: 70vw;
            }
            .result-visible {
                font-size: 20vw;
            }
        }
    </style>
</head>
<body>
    <script>
        const version = '1.0a'

        let audioReady = false
        const audio = new Audio()
        audio.src = 'yooooo.mp3'
        const markReady = () => {
            audioReady = true
            button.style.backgroundColor = '#00FF00'
        }
        audio.addEventListener( 'loadedmetadata', markReady)
        audio.addEventListener( 'canplay', markReady)

        const div = document.createElement('div')
        div.className = 'container'
        document.body.appendChild( div )

        const button = document.createElement('button')
        button.className = 'start-button'
        button.innerHTML = 'yes or no?'
        div.appendChild( button )

        const pepe = document.createElement('img')
        pepe.className = 'pepe'
        pepe.src = 'pepe.png'
        div.appendChild( pepe )

        const dude = document.createElement('img')
        dude.className = 'dude'
        dude.src = 'dude.png'
        div.appendChild( dude )


setTimeout(() => {
    
}, 100)
        button.addEventListener('click', e => {
            if ( !audioReady ) {
                return
            }

            div.removeChild( button )
            audio.play()

            const state = {
                smiley: false,
                dude: false,
                pepe: false
            }
            const check = () => {
                const pos = audio.currentTime
                if ( pos >= 7.5 && !state.smiley ) {
                    state.smiley = true

                    const result = Math.random() >= 0.50 ? true : false
                    const text = result ? 'yes ðŸ˜ƒ' : 'NO ðŸ˜ '
                    const element = document.createElement('span')
                    element.className = 'result'
                    setTimeout(() => {
                        element.className += ' result-visible'
                    }, 100)
                    element.innerHTML = text
                    div.appendChild( element )
                }
                if ( pos >= 7.8 && !state.dude ) {
                    state.dude = true
                    dude.className += ' dude-visible'
                }
                const pepeEnd = 7.2
                if ( pos >= 1.0 && pos < pepeEnd && !state.pepe ) {
                    state.pepe = true
                    pepe.style.bottom = '-5px'
                }
                if ( pos >= pepeEnd && state.pepe ) {
                    state.pepe = false
                    pepe.style.transition = 'bottom 1s'
                    pepe.style.bottom = '-100vh'
                }
                requestAnimationFrame( check )
            }
            check()
        })

        const verLabel = document.createElement('span')
        verLabel.style.position = 'fixed'
        verLabel.style.left = '0'
        verLabel.style.bottom = '0'
        verLabel.innerHTML = version
        div.appendChild( verLabel )

    </script>

    <!-- <iframe id="existing-iframe-example"
        width="640" height="360"
        src="https://www.youtube.com/embed/NuU951h--cU?autoplay=1&enablejsapi=1"
        frameborder="0"
        allow="autoplay"
        style="border: solid 4px #37474F"
    ></iframe>

    <script type="text/javascript">
        var tag = document.createElement('script');
        tag.id = 'iframe-demo';
        tag.src = 'https://www.youtube.com/iframe_api';
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('existing-iframe-example', {
                events: {
                    'onReady': onPlayerReady,
                },
                playerVars: {
                    "autoplay": 1
                }
            });
        }
        function onPlayerReady(event) {
            // console.log('boom')
            // event.target.setVolume(100);
            // event.target.playVideo();
            
        }
    </script> -->
</body>